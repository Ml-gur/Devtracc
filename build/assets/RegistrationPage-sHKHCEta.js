import{v as k,a as u,j as e,B as g,A as j,h as y}from"./index-RP35jY-7.js";import{L as n,I as m}from"./label-BYT-7mqS.js";import{S,r as R,s as A,t as q,v as F}from"./select-DpGEBar1.js";import{C as E,a as L,b as D,d as M,c as T}from"./card-01_Ovl9v.js";import{C as B}from"./circle-check-big-Ml8rsUmQ.js";import{M as I}from"./mail-BM6AhEgu.js";function H({onNavigate:f,onRegister:U}){const{signUp:b}=k(),[a,N]=u.useState({fullName:"",email:"",password:"",confirmPassword:"",country:"",phone:""}),[r,o]=u.useState({}),[t,v]=u.useState(!1),[x,c]=u.useState(""),[p,h]=u.useState(!1),w=[{value:"kenya",label:"Kenya"},{value:"tanzania",label:"Tanzania"},{value:"uganda",label:"Uganda"},{value:"rwanda",label:"Rwanda"},{value:"nigeria",label:"Nigeria"},{value:"ghana",label:"Ghana"},{value:"south_africa",label:"South Africa"},{value:"ethiopia",label:"Ethiopia"},{value:"morocco",label:"Morocco"},{value:"egypt",label:"Egypt"},{value:"other",label:"Other African Country"}],C=()=>{const s={};a.fullName.trim()?a.fullName.trim().length<2&&(s.fullName="Full name must be at least 2 characters"):s.fullName="Full name is required";const l=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return a.email?l.test(a.email)||(s.email="Please enter a valid email address"):s.email="Email is required",a.password?a.password.length<6&&(s.password="Password must be at least 6 characters"):s.password="Password is required",a.confirmPassword?a.password!==a.confirmPassword&&(s.confirmPassword="Passwords do not match"):s.confirmPassword="Please confirm your password",a.country||(s.country="Please select your country"),a.phone?a.phone.length<10&&(s.phone="Please enter a valid phone number"):s.phone="Phone number is required",o(s),Object.keys(s).length===0},i=(s,l)=>{N(d=>({...d,[s]:l})),r[s]&&o(d=>({...d,[s]:void 0})),r.general&&o(d=>({...d,general:void 0})),x&&c(""),p&&h(!1)},P=async s=>{if(s.preventDefault(),!!C()){v(!0),o({}),c(""),h(!1);try{console.log("ðŸš€ Starting registration process for:",a.email);const l=await b({fullName:a.fullName,email:a.email,password:a.password,country:a.country,phone:a.phone});console.log("ðŸ“ Registration result:",{success:l.success,requiresConfirmation:l.requiresConfirmation,hasUser:!!l.user,error:l.error}),l.success?l.requiresConfirmation?(console.log("ðŸ“§ Registration successful, email confirmation required"),h(!0),c(l.message||"Account created! Please check your email to confirm your account.")):(console.log("âœ… Registration successful, email already confirmed"),c("Account created successfully! Setting up your profile...")):l.error?l.error.includes("already registered")||l.error.includes("already exists")?(console.log("âš ï¸ User already exists, showing login suggestion"),o({email:"This email is already registered. Please try logging in instead."})):l.requiresConfirmation?(console.log("ðŸ“§ Registration successful, email confirmation required"),h(!0),c(l.message||"Please check your email to confirm your account.")):(console.log("âŒ Registration failed:",l.error),o({general:l.error})):(console.log("âŒ Registration failed with unknown error"),o({general:"Registration failed. Please try again."}))}catch(l){console.error("Registration submission error:",l),o({general:"Registration failed. Please check your connection and try again."})}finally{v(!1)}}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 bg-muted/20",children:[e.jsxs(g,{variant:"ghost",onClick:()=>f("welcome"),className:"absolute top-4 left-4 flex items-center gap-2",disabled:t,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),e.jsxs(E,{className:"w-full max-w-md",children:[e.jsxs(L,{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-primary-foreground font-bold",children:"DT"})}),e.jsx("span",{className:"text-xl font-bold",children:"DevTrack"})]}),e.jsx(D,{children:"Create Your Account"}),e.jsx(M,{children:"Join the African developer community and start showcasing your journey"})]}),e.jsx(T,{children:p?e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(B,{className:"w-8 h-8 text-green-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold",children:"Registration Successful!"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["We've sent a confirmation email to"," ",e.jsx("span",{className:"font-medium text-foreground",children:a.email})]})]}),e.jsxs(j,{className:"border-blue-200 bg-blue-50 dark:bg-blue-950 dark:border-blue-800",children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx(y,{className:"text-blue-800 dark:text-blue-200",children:"Please check your email and click the confirmation link to activate your account."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{onClick:()=>f("login"),className:"w-full",children:"Continue to Login"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"You'll be redirected to complete your profile after confirming your email."})]})]}):e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[x&&!p&&e.jsx(j,{className:"border-green-200 bg-green-50 dark:bg-green-950 dark:border-green-800",children:e.jsx(y,{className:"text-green-800 dark:text-green-200",children:x})}),r.general&&e.jsx(j,{variant:"destructive",children:e.jsx(y,{children:r.general})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"fullName",children:"Full Name"}),e.jsx(m,{id:"fullName",type:"text",placeholder:"Enter your full name",value:a.fullName,onChange:s=>i("fullName",s.target.value),className:r.fullName?"border-destructive":"",disabled:t}),r.fullName&&e.jsx("p",{className:"text-sm text-destructive",children:r.fullName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"email",children:"Email Address"}),e.jsx(m,{id:"email",type:"email",placeholder:"Enter your email",value:a.email,onChange:s=>i("email",s.target.value),className:r.email?"border-destructive":"",disabled:t,autoComplete:"email"}),r.email&&e.jsx("p",{className:"text-sm text-destructive",children:r.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"password",children:"Password"}),e.jsx(m,{id:"password",type:"password",placeholder:"Create a strong password (min 6 characters)",value:a.password,onChange:s=>i("password",s.target.value),className:r.password?"border-destructive":"",disabled:t,autoComplete:"new-password"}),r.password&&e.jsx("p",{className:"text-sm text-destructive",children:r.password})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(m,{id:"confirmPassword",type:"password",placeholder:"Confirm your password",value:a.confirmPassword,onChange:s=>i("confirmPassword",s.target.value),className:r.confirmPassword?"border-destructive":"",disabled:t,autoComplete:"new-password"}),r.confirmPassword&&e.jsx("p",{className:"text-sm text-destructive",children:r.confirmPassword})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"country",children:"Country"}),e.jsxs(S,{value:a.country,onValueChange:s=>i("country",s),disabled:t,children:[e.jsx(R,{className:r.country?"border-destructive":"",children:e.jsx(A,{placeholder:"Select your country"})}),e.jsx(q,{children:w.map(s=>e.jsx(F,{value:s.value,children:s.label},s.value))})]}),r.country&&e.jsx("p",{className:"text-sm text-destructive",children:r.country})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"phone",children:"Phone Number"}),e.jsx(m,{id:"phone",type:"tel",placeholder:"+254 712 345 678",value:a.phone,onChange:s=>i("phone",s.target.value),className:r.phone?"border-destructive":"",disabled:t,autoComplete:"tel"}),r.phone&&e.jsx("p",{className:"text-sm text-destructive",children:r.phone})]}),e.jsx(g,{type:"submit",className:"w-full",disabled:t,children:t?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Creating Account..."})]}):"Create Account"}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Already have an account?"," ",e.jsx("button",{type:"button",onClick:()=>f("login"),className:"text-primary hover:underline font-medium",disabled:t,children:"Login here"})]})})]})})]})]})}export{H as default};
